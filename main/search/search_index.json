{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"napari-stitcher","text":"<p>A napari plugin for stitching large multi-positioning datasets in 2/3D+t using <code>multiview-stitcher</code>.</p> <p> Image data by Arthur Michaut @ J\u00e9r\u00f4me Gros Lab @ Institut Pasteur.</p>"},{"location":"#quick-guide","title":"Quick guide:","text":"<ol> <li>Directly stitch napari layers: Use napari to load, visualize and preposition the tiles to be stitched.</li> <li>When working with multi-channel data, stick to the following naming convention: <code>{tile} :: {channel}</code>.</li> <li>Load either all or just a subset of the layers into the plugin.</li> <li>Choose registration options: registration channel, binning and more.</li> <li>Stitching = registration (refining the positions, optional) + fusion (joining the tiles into a single image).</li> <li>The registration result is shown in the viewer and the fused channels are added as new layers.</li> </ol>"},{"location":"#demo","title":"Demo","text":"<p>This demo uses the awesome <code>napari-threedee</code> for prepositioning the tiles. Image data: BigStitcher.</p>"},{"location":"contributing/","title":"Contributing","text":"<p>Contributions are very welcome.</p>"},{"location":"installation/","title":"Installation","text":"<p>You can install <code>napari-stitcher</code> via pip:</p> <pre><code>pip install napari-stitcher\n</code></pre> <p>To install latest development version: <pre><code>pip install git+https://github.com/multiview-stitcher/napari-stitcher.git\n</code></pre></p> <p>Don't have conda installed?</p> <p>We recommend using python and <code>napari-stitcher</code> within a conda environment. Follow the instructions below to install <code>conda</code> on your computer.</p>"},{"location":"installation/#installing-python","title":"Installing Python","text":""},{"location":"installation/#overview","title":"Overview","text":"<p>This how-to teaches how to install Python on your computer using <code>conda</code>, which is both a</p> <ul> <li>environment manager and a</li> <li>package manager.</li> </ul>"},{"location":"installation/#instructions","title":"Instructions","text":"<p>Select the installation instructions for your operating system and processor from the tabs below.</p> LinuxMac OS (Intel)Mac OS (M1/M2)Windows <ol> <li>In your web browser, navigate to this download page.</li> <li>Scroll down to the \"Miniforge\" header of the \"Downloads\" section. Click the link to download link for <code>Miniforge-Linux-x86_64</code>.</li> <li>Open your terminal application</li> <li>Navigate to the folder you downloaded the installer to (usually this is in your Downloads folder). If the file was downloaded to your Downloads folder, you would enter:</li> </ol> <pre><code>cd ~/Downloads\n</code></pre> <ol> <li>Execute the installer with the command below. You can use your arrow keys to scroll up and down to read the license agreement and enter \"yes\" if you agree.</li> </ol> <pre><code>bash Miniforge-Linux-x86_64.sh\n</code></pre> <ol> <li>After installation, you will be asked if you would like to initialize your terminal with \"conda init\". Enter \"yes\" to initalize your terminal.</li> <li>To verify your installation worked, close your Terminal window and open a new one. You should see <code>(base)</code> to the left of your prompt.</li> </ol> <p>Don't see (base)?</p> <p>You can manually initialize conda by entering the command below and re-opening your terminal application.</p> <pre><code>conda init\n</code></pre> <ol> <li>In your web browser, navigate to this download page.</li> <li>Scroll down to the \"Miniforge\" header of the \"Downloads\" section. Click the link to download link for <code>Miniforge-MacOSX-x86_64</code>.</li> <li>Open your Terminal (you can search for it in spotlight - <code>cmd</code> + <code>space</code>)</li> <li>Navigate to the folder you downloaded the installer to (usually this is in your Downloads folder). If the file was downloaded to your Downloads folder, you would enter:</li> </ol> <pre><code>cd ~/Downloads\n</code></pre> <ol> <li>Execute the installer with the command below.  You can use your arrow keys to scroll up and down to read the license agreement and enter \"yes\" if you agree.</li> </ol> <pre><code>bash Miniforge-MacOSX-x86_64.sh\n</code></pre> <ol> <li>After installation, you will be asked if you would like to initialize your terminal with \"conda init\". Enter \"yes\" to initalize your terminal.   </li> <li>To verify your installation worked, close your Terminal window and open a new one. You should see <code>(base)</code> to the left of your prompt.</li> </ol> <p>Don't see (base)?</p> <p>You can manually initialize conda by entering the command below and re-opening your terminal application. <pre><code>conda init\n</code></pre></p> <ol> <li>In your web browser, navigate to this download page.</li> <li>Scroll down to the \"Miniforge\" header of the \"Downloads\" section. Click the link to download link for <code>Miniforge-MacOSX-arm64</code>.</li> <li>Open your Terminal (you can search for it in spotlight - <code>cmd</code> + <code>space</code>)</li> <li>Navigate to the folder you downloaded the installer to (usually this is in your Downloads folder). If the file was downloaded to your Downloads folder, you would enter:</li> </ol> <pre><code>cd ~/Downloads\n</code></pre> <ol> <li>Execute the installer with the command below. You can use your arrow keys to scroll up and down to read it/agree to it.</li> </ol> <pre><code>bash Miniforge-MacOSX-arm64.sh\n</code></pre> <ol> <li>After installation, you will be asked if you would like to initialize your terminal with \"conda init\". Enter \"yes\" to initalize your terminal. </li> <li>To verify your installation worked, close your Terminal window and open a new one. You should see <code>(base)</code> to the left of your prompt.</li> </ol> <p>Don't see (base)?</p> <p>You can manually initialize conda by entering the command below and re-opening your terminal application. <pre><code>conda init\n</code></pre></p> <ol> <li>In your web browser, navigate to this download page.</li> <li>Scroll down to the \"Miniforge\" header of the \"Downloads\" section. Click the link to download link for <code>Miniforge-Windows-x86_64</code>.</li> <li>Find the file you downloaded (Miniforge-Windows-x86_64.exe) and double click to execute it. Follow the instructions to complete the installation.</li> <li>Once the installation has completed, you can verify it was correctly installed by searching for the \"miniforge prompt\" in your Start menu.</li> </ol>"},{"location":"installation/#creating-a-conda-environment","title":"Creating a conda environment","text":"<ul> <li> <p>Create a new conda environment with the necessary packages:</p> <pre><code>conda create -n napari-stitcher python=3.10 napari pyqt=5\n</code></pre> </li> </ul>"},{"location":"installation/#opening-napari","title":"Opening napari","text":"MacOS/LinuxWindows <ol> <li>Open a terminal</li> <li>Activate the right conda environment: <code>conda activate napari-stitcher</code> in the terminal (MacOS) or Miniconda Prompt (Windows)</li> <li>Start napari by running <code>napari</code></li> <li>Start the plugin in the menu plugins &gt; napari-stitcher &gt; Stitcher</li> </ol> <ol> <li>Open the Miniconda Prompt (Windows)</li> <li>Activate the right conda environment: <code>conda activate napari-stitcher</code></li> <li>Start napari by running <code>napari</code></li> <li>Start the plugin in the menu plugins &gt; napari-stitcher &gt; Stitcher</li> </ol>"},{"location":"loading/","title":"Loading images","text":"<p><code>napari-stitcher</code> can stitch any image layers that are loaded into napari. You can load images into napari by dragging and dropping files into the viewer, or by using the <code>File &gt; Open Files</code> menu.</p> <p>Multi-channel data</p> <p>We recommend using the napari reader plugin <code>napari-aicsimageio</code> for loading individual image layers into napari. This is especially useful for multi-channel data, as it automatically names the layers according to the naming convention used by <code>napari-stitcher</code>.</p> <p>Additionally, <code>napari-stitcher</code> supports reading mosaic files which contain multiple pre-positioned tiles. If more than one scene is present, you'll be prompted to select a scene to load. To use this feature, use the <code>napari-stitcher</code> reader plugin. Supported file formats include .czi and .lif.</p> <p>Image files / napari layers to stitch can be 2D/3D(+time).</p> <p>Selecting a reader plugin</p> <p>After dropping an image file onto napari or by using the <code>File &gt; Open Files</code> menu, you can select the reader plugin to use.</p>"},{"location":"naming_convention/","title":"Layer naming convention","text":"<p>Napari and multi-channel images</p> <p>In napari, different channels are represented as different layers. However <code>napari-stitcher</code> needs to know which layers correspond to the same tile. To do this, the layers need to be named in a specific way.</p> <p>For single channel datasets, layer names can be arbitrary. For multi-channel datasets, the layers need to be named in the following way for best compatibility with napari-stitcher:</p> <p><code>{tile} :: {channel}</code>.</p> <p>Example:</p> <p></p> <p>This is the convention followed by <code>bioio</code> when loading images into napari.</p> <p>How to edit layer names?</p> <p>To rename a layer, double-click on the layer name in the layer list and type the new name. To programmatically rename layers, you can use e.g. something like the following code in the napari console:</p> <pre><code>for il, l in enumerate(viewer.layers):\n    l.name = f'Tile {il // 2} :: {[GFP, RFP][il % 2]}'\n</code></pre>"},{"location":"prearrangement/","title":"Prepositioning tiles","text":"<p>Prepositioning tiles</p> <p>As a starting point for registration, <code>napari-stitcher</code> uses the positions of the layers as they are shown in napari.</p> <p>There are two ways to preposition the layers in napari:</p>"},{"location":"prearrangement/#1-manual-positioning","title":"1. Manual positioning","text":"<p>You can manually position the tiles by dragging and dropping them in the viewer. This is useful when you have a small number of tiles and you want to freely position them.</p> <p>Visualization tip</p> <p>To visualize tiles on top of each other in napari, you can set the \"blending\" property (in the layer controls) of all layers to \"additive\". Additionally, you can choose a different color for each layer to help you distinguish them.</p>"},{"location":"prearrangement/#2d-case","title":"2D case","text":""},{"location":"prearrangement/#3d-case","title":"3D case","text":"<p>Pixel spacing</p> <p>Make sure to set the pixel spacing of the layers in Z, Y, X correctly. You can do this by opening the console and running something like the following code:</p> <pre><code>for l in viewer.layers:\n    l.scale = [2, 0.3, 0.3]\n</code></pre> <p>Install the awesome <code>napari-threedee</code> plugin to enable 3D positioning.</p> <p></p>"},{"location":"prearrangement/#2-aligning-on-a-grid","title":"2. Aligning on a grid","text":"<p>The widget under Plugins-&gt;napari-stitcher-&gt;Mosaic arrangement allows you to align the layers on a grid. This is useful when you have a large number of tiles which should be placed on a regular grid. This works for 2D and 3D data.</p> <p></p>"},{"location":"scripting/","title":"Scripting and batch processing","text":"<p>The stitching functionality of <code>napari-stitcher</code> relies on the <code>multiview-stitcher</code> toolbox, which is a Python package to be used in scripts and batch processing. This allows you to automate the stitching process and integrate it into your existing workflows.</p>"},{"location":"scripting/#getting-started","title":"Getting started","text":"<p>Have a look at:</p> <ol> <li>The multiview-stitcher documentation for an overview of the toolbox and its functionality.</li> <li>A code example.</li> <li>Example jupyter notebooks.</li> </ol>"},{"location":"writing/","title":"Saving fused images","text":"<p>Select the fused image layer(s) and press Ctrl/Command + S or use the <code>File &gt; Save Selected Layers</code>. When using the <code>napari-stitcher</code> writer plugin, you can save all channel layers as a single tif file.</p> <p>Selecting a writer plugin</p> <p>In the save dialog, you can select the writer plugin to use.</p>"}]}